window.URL=window.URL||window.webkitURL;
window.FSLoaderHelpers={LOAD_AS_TAGS:"tag",LOAD_AS_XHR:"xhr",LOAD_AS_BLOB:"blob",LOAD_AS_ARRAY_BUFFER:"arraybuffer",DEFAULT_LOAD_TYPE:"tag",METHOD_GET:"GET",METHOD_POST:"POST",TYPE_JAVASCRIPT:"script",TYPE_CSS:"css",TYPE_IMAGE:"image",TYPE_SOUND:"sound",TYPE_JSON:"json",TYPE_XML:"xml",TYPE_SVG:"svg",TYPE_TEXT:"text",FILE_TYPE_TEXT:"text",FILE_TYPE_BINARY:"binary",STATE_UNLOADED:"unloaded",STATE_STARTED:"started",STATE_LOADING:"loading",STATE_FINISHED:"complete",STATE_ERROR:"error",REGISTERED_LOADER_OPTIONS:["id",
"preventCache","container"],REGISTERED_QUEUE_OPTIONS:"id preventCache container ignoreErrors onitemerror onitemerrorparams onitemcomplete onitemcompleteparams onitemstart onitemstartparams onqueueerror onqueueerrorparams onqueuecomplete onqueuecompleteparams onqueueprogress onqueueprogressparams".split(" "),REGISTERED_ITEM_OPTIONS:"id preventCache method type onstart onstartparams onerror onerrorparams oncomplete oncompleteparams".split(" "),MERGE_OPTIONS:["preventCache"],MODULE_BASE:"js/franchistein/",
isBinary:function(a){switch(a){case FSLoaderHelpers.TYPE_IMAGE:case FSLoaderHelpers.TYPE_SOUND:return!0;default:return!1}},getFileExtension:function(a){return a.split(".").pop()},identifyTagType:function(a){switch(a.tagName.toUpperCase()){case "IMG":return{tag:a,path:a.src,type:FSLoaderHelpers.TYPE_IMAGE};case "LINK":return{tag:a,path:a.href,type:FSLoaderHelpers.TYPE_CSS};case "SCRIPT":return{tag:a,path:a.src,type:FSLoaderHelpers.TYPE_JAVASCRIPT}}},findRule:function(a,c){if(null===a)return[];var b,
d=a.length,e,f=[];for(b=0;b<d;b++)void 0!==a[b].style&&(e=a[b].style[c],"initial"!==e&&(""!==e&&void 0!==e&&"none"!==e)&&(e=e.replace(/^url\(["']?/,"").replace(/["']?\)$/,""),f.push(e)));return f},isData:function(a){switch(a){case FSLoaderHelpers.TYPE_JSON:case FSLoaderHelpers.TYPE_TEXT:case FSLoaderHelpers.TYPE_XML:return!0;default:return!1}},getURLByBlob:function(a){return window.URL.createObjectURL(a)},isXHR2Supported:function(){return"undefined"!==typeof(new XMLHttpRequest).upload&&("undefined"!==
typeof window.postMessage||"undefined"!==typeof window.FormData&&"undefined"!==typeof window.File&&"undefined"!==typeof window.Blob)}};
window.FSLoaderItem=function(a,c,b){this.id="loader-item-"+a.items.length;this.path=c;this.options={};this.reference=a;this.type=this.data=void 0;this.params={};this.method=FSLoaderHelpers.METHOD_GET;this.retriesLeft=this.retries=0;this.loadingType=void 0;this.preventCache=!1;this.element=void 0;this.state=FSLoaderHelpers.STATE_UNLOADED;this.data=this.queue=void 0;this.progress=this.bytesLoaded=this.bytesTotal=0;void 0!==b?(this.options=b,void 0!==b.id&&(this.id=b.id),this.type=void 0===b.type?a.getFileType(c):
b.type,void 0!==b.method&&(this.method=b.method),void 0!==b.preventCache&&(this.preventCache=b.preventCache),void 0!==b.retries&&(this.retries=this.retriesLeft=b.retries)):this.type=a.getFileType(c)};var F_NAMESPACE;F_NAMESPACE=this.fs?this.fs:window;
(function(a){a.FSLoader=function(c){this.currentLoading=!1;this.items=[];this.options={};this.currentRequest=void 0;void 0!==c&&(this.options=c);void 0!==this.options&&void 0!==this.options.container?this.containerElement=this.options.container:(this.containerElement=document.createElement("div"),this.containerElement.id="divContainerFSLoader",this.containerElement.style.display="none",document.body.appendChild(this.containerElement))};a=a.FSLoader.prototype;a.currentLoading=!1;a.items=[];a.options=
null;a.currentRequest=null;a.containerElement=void 0;a.load=function(c,a,d){c=this.generateLoaderItem(c,a);this.items.push(c);(void 0===d||!0===d)&&this.executeLoad(c);return c};a.get=function(c){return this.getElementByAttribute("id",c)};a.getElementByAttribute=function(c,a){return this.items[this.items.indexByObjectValue(c,a)]};a.evaluateURL=function(c,a){return!0===a?-1===c.indexOf("?")?c+"?cache="+(new Date).getDate():c+"&cache="+(new Date).getDate():c};a.identifyLoadingType=function(c){return!0===
FSLoaderHelpers.isBinary(c)?(FSLoaderHelpers.isXHR2Supported(),FSLoaderHelpers.LOAD_AS_TAGS):FSLoaderHelpers.isData(c)?FSLoaderHelpers.LOAD_AS_XHR:FSLoaderHelpers.LOAD_AS_TAGS};a.generateTagByType=function(c,a){switch(c){case FSLoaderHelpers.TYPE_CSS:return this.createCssTag(a);case FSLoaderHelpers.TYPE_JAVASCRIPT:return this.createJavascriptTag(a);case FSLoaderHelpers.TYPE_IMAGE:return this.createImageTag(a);case FSLoaderHelpers.TYPE_SVG:return this.createSVGTag(a);case FSLoaderHelpers.TYPE_SOUND:return this.createSoundTag(a)}};
a.getFileType=function(c){switch(FSLoaderHelpers.getFileExtension(c)){case "ogg":case "mp3":case "wav":return FSLoaderHelpers.TYPE_SOUND;case "jpeg":case "jpg":case "gif":case "png":return FSLoaderHelpers.TYPE_IMAGE;case "json":return FSLoaderHelpers.TYPE_JSON;case "xml":return FSLoaderHelpers.TYPE_XML;case "css":return FSLoaderHelpers.TYPE_CSS;case "js":return FSLoaderHelpers.TYPE_JAVASCRIPT;case "svg":return FSLoaderHelpers.TYPE_SVG;default:return FSLoaderHelpers.TYPE_TEXT}};a.createJavascriptTag=
function(c){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src",c);return a};a.createSVGTag=function(a){var b=document.createElement("object");b.setAttribute("type","image/svg+xml");b.setAttribute("src",a);return b};a.createSoundTag=function(a){var b=document.createElement("audio");b.setAttribute("type","audio/ogg");b.setAttribute("src",a);return b};a.createCssTag=function(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("type",
"text/css");b.setAttribute("href",a);return b};a.createImageTag=function(a){var b=document.createElement("img");b.setAttribute("src",a);return b};a.executeLoad=function(a){a.state=a.STATE_STARTED;var b;void 0!==a.options.onstart&&(b=a.options.onstart);void 0!==b&&(void 0!==a.options.onstartparams?b.apply(a,a.options.onstartparams):b.apply(a));a.state=a.STATE_LOADING;if(void 0!==a.queue)a.queue.onQueueItemStart(this);if(a.loadingType===FSLoaderHelpers.LOAD_AS_TAGS){b=this.generateTagByType(a.type,
this.evaluateURL(a.path,a.preventCache));a.element=b;b.addEventListener("load",this.onItemLoadComplete.bind(a),!1);b.addEventListener("error",this.onItemLoadError.bind(a),!1);try{void 0===a.options.container?this.containerElement.appendChild(b):a.options.container.appendChild(b)}catch(d){throw Error("Cannot appendChild script on the given container element.");}}else if(a.loadingType===FSLoaderHelpers.LOAD_AS_XHR||a.loadingType===FSLoaderHelpers.LOAD_AS_BLOB||a.loadingType===FSLoaderHelpers.LOAD_AS_ARRAY_BUFFER){if(window.XMLHttpRequest)this.currentRequest=
new XMLHttpRequest;else try{this.currentRequest=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return null}a.type===FSLoaderHelpers.TYPE_TEXT&&this.currentRequest.overrideMimeType&&this.currentRequest.overrideMimeType("text/plain; charset=x-user-defined");this.currentRequest.open(a.method,this.evaluateURL(a.path,a.preventCache),!0);this.currentRequest.send();FSLoaderHelpers.isBinary(a.type)&&FSLoaderHelpers.isXHR2Supported()&&(a.loadingType===FSLoaderHelpers.LOAD_AS_BLOB?this.currentRequest.responseType=
"blob":a.loadingType===FSLoaderHelpers.LOAD_AS_ARRAY_BUFFER&&(this.currentRequest.responseType="arraybuffer"));this.currentRequest.addEventListener("progress",this.onItemLoadProgress.bind(a),!1);this.currentRequest.addEventListener("load",this.onItemLoadComplete.bind(a),!1);this.currentRequest.addEventListener("error",this.onItemLoadError.bind(a),!1);a.element=this.currentRequest;return!0}return!1};a.generateLoaderItem=function(a,b){var d=new FSLoaderItem(this,a,b);d.loadingType=void 0!==b?void 0!==
b.loadingType?b.loadingType:this.identifyLoadingType(d.type):this.identifyLoadingType(d.type);return d};a.removeEventsFromElement=function(a){a.removeEventListener("load",this.onItemLoadComplete);a.removeEventListener("error",this.onItemLoadError);a.removeEventListener("progress",this.onItemLoadProgress)};a.onItemLoadComplete=function(a){this.state=FSLoaderHelpers.STATE_FINISHED;this.progress=100;if(this.reference.loadingType===FSLoaderHelpers.LOAD_AS_BLOB||this.reference.loadingType===FSLoaderHelpers.LOAD_AS_XHR)this.element=
a.currentTarget;if(this.loadingType===FSLoaderHelpers.LOAD_AS_TAGS)this.data=this.element;else if(this.loadingType===FSLoaderHelpers.LOAD_AS_XHR)this.data=a.currentTarget.response;else if(this.loadingType===FSLoaderHelpers.LOAD_AS_BLOB||this.loadingType===FSLoaderHelpers.LOAD_AS_ARRAY_BUFFER)this.data=a.currentTarget.response;if(void 0!==this.queue)this.queue.onQueueItemComplete(this);void 0!==this.options.oncomplete&&(void 0!==this.options.oncompleteparams?this.options.oncomplete.apply(this,this.options.oncompleteparams):
this.options.oncomplete.apply(this));this.reference.removeEventsFromElement(this.element)};a.onItemLoadProgress=function(a){if(!(0<a.loaded&&0===a.total)){this.state=FSLoaderHelpers.STATE_LOADING;this.bytesLoaded=a.loaded;this.bytesTotal=a.total;this.progress=Math.round(100*this.bytesLoaded/this.bytesTotal);if(void 0!==this.queue)this.queue.onQueueItemProgress(this);void 0!==this.options.onprogress&&(void 0!==this.options.onprogressparams?this.options.onprogress.apply(this,this.options.onprogressparams):
this.options.onprogress.apply(this))}};a.onItemLoadError=function(){this.reference.removeEventsFromElement(this.element);if(0<this.retriesLeft){this.retriesLeft--;var a=this;setTimeout(function(){a.reference.executeLoad(a)},100)}else{this.state=FSLoaderHelpers.STATE_ERROR;if(void 0!==this.queue)this.queue.onQueueItemError(this);void 0!==this.options.onerror&&(void 0!==this.options.onerrorparams?this.options.onerror.apply(this,this.options.onerrorparams):this.options.onerror.apply(this))}}})(F_NAMESPACE);
window.FSLoaderQueue=function(a){this.reference=new window.FSLoader(a);this.currentIndex=0;this.currentItem=void 0;this.ignoreErrors=!0;this.isPaused=!1;this.firstStart=!0;this.progress=this.totalLoaded=this.total=0;this.options={};void 0!==a&&(this.options=a);void 0!==this.options&&(void 0!==this.options.ignoreErrors&&(this.ignoreErrors=this.options.ignoreErrors),void 0!==this.options.ignoreErrors&&(this.ignoreErrors=this.options.ignoreErrors));FSLoader.call(this,a)};
if(void 0!==window.FSLoader)FSLoaderQueue.prototype=new window.FSLoader,FSLoaderQueue.prototype.constructor=window.FSLoaderQueue;else throw window.FSLoaderQueue=void 0,Error("FSLoaderQueue needs FSLoader for work.");FSLoaderQueue.prototype.add=function(a,c){var b=[],d,e,f=void 0;"[object Array]"===Object.prototype.toString.call(a)?b=a:b.push(a);d=b.length;for(e=0;e<d;e++)f=this.load(b[e],c,!1),f.queue=this,f.reference=this.reference,this.total=this.items.length};
FSLoaderQueue.prototype.start=function(){0!==this.items.length&&(!0===this.firstStart&&(this.triggerCallbackEvent("onqueuestart"),this.updateQueueProgress()),this.currentItem=this.items[this.currentIndex],this.executeLoad(this.currentItem),this.firstStart=!1)};FSLoaderQueue.prototype.pause=function(){this.isPaused=!0};FSLoaderQueue.prototype.next=function(){this.currentIndex++;this.start()};FSLoaderQueue.prototype.previous=function(){this.currentIndex--;this.start()};
FSLoaderQueue.prototype.verifyQueueEnd=function(){return this.currentIndex<this.total-1?!0:!1};FSLoaderQueue.prototype.onQueueItemComplete=function(){this.totalLoaded++;this.triggerCallbackEvent("onitemcomplete");this.updateQueueProgress();this.verifyQueueEnd()?this.next():this.triggerCallbackEvent("onqueuecomplete")};
FSLoaderQueue.prototype.onQueueItemError=function(a){this.triggerCallbackEvent("onitemerror");!0===this.ignoreErrors?(a.progress=100,this.updateQueueProgress(),this.verifyQueueEnd()?this.next():this.triggerCallbackEvent("onqueuecomplete")):this.triggerCallbackEvent("onqueueerror")};FSLoaderQueue.prototype.onQueueItemProgress=function(){this.updateQueueProgress()};FSLoaderQueue.prototype.onQueueItemStart=function(a){this.triggerCallbackEvent("onitemstart",a)};
FSLoaderQueue.prototype.updateQueueProgress=function(){for(var a=0,c=0;c<this.items.length;c++)a+=this.items[c].progress;this.progress=Math.round(100*a/(100*this.items.length));this.triggerCallbackEvent("onitemprogress");this.triggerCallbackEvent("onqueueprogress")};FSLoaderQueue.prototype.triggerCallbackEvent=function(a,c){var b=this;void 0!==c&&(b=c);void 0!==b.options&&void 0!==b.options[a]&&(void 0!==b.options[a+"params"]?b.options[a].apply(b,b.options[a+"params"]):b.options[a].apply(b))};
window.FSPreloader=function(a){this.container=document;this.elements=[];this.cssElements=[];FSLoaderQueue.call(this,a)};if(void 0!==window.FSLoaderQueue)FSPreloader.prototype=new window.FSLoaderQueue,FSPreloader.prototype.constructor=window.FSLoaderQueue;else throw window.FSPreloader=void 0,Error("FSPreloader needs FSLoaderQueue to work.");
FSPreloader.prototype.parseCss=function(a){if(void 0!==a){var c=[],b=a.length,d;for(d=0;d<b;d++)null!==a[d]&&void 0!==a[d]&&(null!==a[d].cssRules||null!==a[d].rules?"undefined"!==typeof a[d].cssRules?c=a[d].cssRules:"undefined"!==typeof a[d].rules&&(c=a[d].rules):console.log("WARNING: cssRules/rules is null for the element: "+a[d].href),this.add(FSLoaderHelpers.findRule(c,"backgroundImage")))}};
FSPreloader.prototype.parseDocument=function(a){this.elements=document.querySelectorAll('[data-preload="true"]');var c=this.elements.length,b,d;for(d=0;d<c;d++)b=FSLoaderHelpers.identifyTagType(this.elements[d]),b.type===FSLoaderHelpers.TYPE_CSS?this.cssElements.push(b.tag.sheet):b.type===FSLoaderHelpers.TYPE_IMAGE&&this.add(b.path);void 0!==a&&("true"===a.cssDependencies||!0===a.cssDependencies)&&this.parseCss(this.cssElements)};
