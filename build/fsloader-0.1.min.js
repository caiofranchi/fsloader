var F_NAMESPACE;F_NAMESPACE=this.fs?this.fs:window;window.URL=window.URL||window.webkitURL;
(function(a){a.FSLoaderHelpers=function(){throw Error("Do not instantiate a static class");};a.FSLoaderHelpers.LOAD_AS_TAGS="tag";a.FSLoaderHelpers.LOAD_AS_XHR="xhr";a.FSLoaderHelpers.LOAD_AS_BLOB="blob";a.FSLoaderHelpers.LOAD_AS_ARRAY_BUFFER="arraybuffer";a.FSLoaderHelpers.DEFAULT_LOAD_TYPE="tag";a.FSLoaderHelpers.METHOD_GET="GET";a.FSLoaderHelpers.METHOD_POST="POST";a.FSLoaderHelpers.TYPE_JAVASCRIPT="script";a.FSLoaderHelpers.TYPE_CSS="css";a.FSLoaderHelpers.TYPE_IMAGE="image";a.FSLoaderHelpers.TYPE_SOUND=
"sound";a.FSLoaderHelpers.TYPE_JSON="json";a.FSLoaderHelpers.TYPE_XML="xml";a.FSLoaderHelpers.TYPE_SVG="svg";a.FSLoaderHelpers.TYPE_TEXT="text";a.FSLoaderHelpers.FILE_TYPE_TEXT="text";a.FSLoaderHelpers.FILE_TYPE_BINARY="binary";a.FSLoaderHelpers.STATE_UNLOADED="unloaded";a.FSLoaderHelpers.STATE_STARTED="started";a.FSLoaderHelpers.STATE_LOADING="loading";a.FSLoaderHelpers.STATE_FINISHED="complete";a.FSLoaderHelpers.STATE_ERROR="error";a.FSLoaderHelpers.REGISTERED_LOADER_OPTIONS=["id","preventCache",
"container"];a.FSLoaderHelpers.REGISTERED_QUEUE_OPTIONS="id preventCache container ignoreErrors onitemerror onitemerrorparams onitemcomplete onitemcompleteparams onitemstart onitemstartparams onqueueerror onqueueerrorparams onqueuecomplete onqueuecompleteparams onqueueprogress onqueueprogressparams".split(" ");a.FSLoaderHelpers.REGISTERED_ITEM_OPTIONS="id preventCache method type onstart onstartparams onerror onerrorparams oncomplete oncompleteparams".split(" ");a.FSLoaderHelpers.MERGE_OPTIONS=["preventCache"];
a.FSLoaderHelpers.isBinary=function(a){switch(a){case FSLoaderHelpers.TYPE_IMAGE:case FSLoaderHelpers.TYPE_SOUND:return!0;default:return!1}};a.FSLoaderHelpers.getFileExtension=function(a){return a.split(".").pop()};a.FSLoaderHelpers.identifyTagType=function(a){switch(a.tagName.toUpperCase()){case "IMG":return{tag:a,path:a.src,type:FSLoaderHelpers.TYPE_IMAGE};case "LINK":return{tag:a,path:a.href,type:FSLoaderHelpers.TYPE_CSS};case "SCRIPT":return{tag:a,path:a.src,type:FSLoaderHelpers.TYPE_JAVASCRIPT}}};
a.FSLoaderHelpers.findRule=function(a,b){if(null===a)return[];var d,h=a.length,e,f=[];for(d=0;d<h;d++)void 0!==a[d].style&&(e=a[d].style[b],"initial"!==e&&(""!==e&&void 0!==e&&"none"!==e)&&(e=e.replace(/^url\(["']?/,"").replace(/["']?\)$/,""),f.push(e)));return f};a.FSLoaderHelpers.isData=function(a){switch(a){case FSLoaderHelpers.TYPE_JSON:case FSLoaderHelpers.TYPE_TEXT:case FSLoaderHelpers.TYPE_XML:return!0;default:return!1}};a.FSLoaderHelpers.getURLByBlob=function(a){return window.URL.createObjectURL(a)};
a.FSLoaderHelpers.isXHR2Supported=function(){return"undefined"!==typeof(new XMLHttpRequest).upload&&("undefined"!==typeof window.postMessage||"undefined"!==typeof window.FormData&&"undefined"!==typeof window.File&&"undefined"!==typeof window.Blob)}})(F_NAMESPACE);F_NAMESPACE=this.fs?this.fs:window;
(function(a){a.FSLoaderItem=function(a,b,d){this.id="loader-item-"+a.items.length;this.path=b;this.options={};this.reference=a;this.type=this.data=void 0;this.params={};this.method=FSLoaderHelpers.METHOD_GET;this.retriesLeft=this.retries=0;this.loadingType=void 0;this.preventCache=!1;this.element=void 0;this.state=FSLoaderHelpers.STATE_UNLOADED;this.data=this.queue=void 0;this.progress=this.bytesLoaded=this.bytesTotal=0;void 0!==d?(this.options=d,void 0!==d.id&&(this.id=d.id),this.type=void 0===d.type?
a.getFileType(b):d.type,void 0!==d.method&&(this.method=d.method),void 0!==d.preventCache&&(this.preventCache=d.preventCache),void 0!==d.retries&&(this.retries=this.retriesLeft=d.retries)):this.type=a.getFileType(b)}})(F_NAMESPACE);F_NAMESPACE=this.fs?this.fs:window;
(function(a){a.FSLoader=function(b){this.currentLoading=!1;this.items=[];this.options={};this.currentRequest=void 0;void 0!==b&&(this.options=b);if(void 0!==this.options&&void 0!==this.options.container)this.containerElement=this.options.container;else if(document)this.containerElement=document.createElement("div"),this.containerElement.id="divContainerFSLoader",this.containerElement.style.display="none",document.body.appendChild(this.containerElement);else throw Error("Document is not available. Please pass a valid containerElement.");
};var c=a.FSLoader.prototype;c.currentLoading=!1;c.items=[];c.options=null;c.currentRequest=null;c.containerElement=void 0;c.load=function(b,a,c){b=this.generateLoaderItem(b,a);this.items.push(b);(void 0===c||!0===c)&&this.executeLoad(b);return b};c.get=function(b){return this.getElementByAttribute("id",b)};c.getElementByAttribute=function(b,a){return this.items[this.items.indexByObjectValue(b,a)]};c.evaluateURL=function(b,a){return!0===a?-1===b.indexOf("?")?b+"?cache="+(new Date).getDate():b+"&cache="+
(new Date).getDate():b};c.identifyLoadingType=function(b){return!0===a.FSLoaderHelpers.isBinary(b)?(a.FSLoaderHelpers.isXHR2Supported(),a.FSLoaderHelpers.LOAD_AS_TAGS):a.FSLoaderHelpers.isData(b)?a.FSLoaderHelpers.LOAD_AS_XHR:a.FSLoaderHelpers.LOAD_AS_TAGS};c.generateTagByType=function(b,d){switch(b){case a.FSLoaderHelpers.TYPE_CSS:return this.createCssTag(d);case a.FSLoaderHelpers.TYPE_JAVASCRIPT:return this.createJavascriptTag(d);case a.FSLoaderHelpers.TYPE_IMAGE:return this.createImageTag(d);case a.FSLoaderHelpers.TYPE_SVG:return this.createSVGTag(d);
case a.FSLoaderHelpers.TYPE_SOUND:return this.createSoundTag(d)}};c.getFileType=function(b){switch(a.FSLoaderHelpers.getFileExtension(b)){case "ogg":case "mp3":case "wav":return a.FSLoaderHelpers.TYPE_SOUND;case "jpeg":case "jpg":case "gif":case "png":return a.FSLoaderHelpers.TYPE_IMAGE;case "json":return a.FSLoaderHelpers.TYPE_JSON;case "xml":return a.FSLoaderHelpers.TYPE_XML;case "css":return a.FSLoaderHelpers.TYPE_CSS;case "js":return a.FSLoaderHelpers.TYPE_JAVASCRIPT;case "svg":return a.FSLoaderHelpers.TYPE_SVG;
default:return a.FSLoaderHelpers.TYPE_TEXT}};c.createJavascriptTag=function(b){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src",b);return a};c.createSVGTag=function(a){var d=document.createElement("object");d.setAttribute("type","image/svg+xml");d.setAttribute("src",a);return d};c.createSoundTag=function(a){var d=document.createElement("audio");d.setAttribute("type","audio/ogg");d.setAttribute("src",a);return d};c.createCssTag=function(a){var d=
document.createElement("link");d.setAttribute("rel","stylesheet");d.setAttribute("type","text/css");d.setAttribute("href",a);return d};c.createImageTag=function(a){var d=document.createElement("img");d.setAttribute("src",a);return d};c.executeLoad=function(b){b.state=b.STATE_STARTED;var d;void 0!==b.options.onstart&&(d=b.options.onstart);void 0!==d&&(void 0!==b.options.onstartparams?d.apply(b,b.options.onstartparams):d.apply(b));b.state=b.STATE_LOADING;if(void 0!==b.queue)b.queue.onQueueItemStart(this);
if(b.loadingType===a.FSLoaderHelpers.LOAD_AS_TAGS){d=this.generateTagByType(b.type,this.evaluateURL(b.path,b.preventCache));b.element=d;d.addEventListener("load",this.onItemLoadComplete.bind(b),!1);d.addEventListener("error",this.onItemLoadError.bind(b),!1);try{void 0===b.options.container?this.containerElement.appendChild(d):b.options.container.appendChild(d)}catch(c){throw Error("Cannot appendChild script on the given container element.");}}else if(b.loadingType===a.FSLoaderHelpers.LOAD_AS_XHR||
b.loadingType===a.FSLoaderHelpers.LOAD_AS_BLOB||b.loadingType===a.FSLoaderHelpers.LOAD_AS_ARRAY_BUFFER){if(window.XMLHttpRequest)this.currentRequest=new XMLHttpRequest;else try{this.currentRequest=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return null}b.type===a.FSLoaderHelpers.TYPE_TEXT&&this.currentRequest.overrideMimeType&&this.currentRequest.overrideMimeType("text/plain; charset=x-user-defined");this.currentRequest.open(b.method,this.evaluateURL(b.path,b.preventCache),!0);this.currentRequest.send();
a.FSLoaderHelpers.isBinary(b.type)&&a.FSLoaderHelpers.isXHR2Supported()&&(b.loadingType===a.FSLoaderHelpers.LOAD_AS_BLOB?this.currentRequest.responseType="blob":b.loadingType===a.FSLoaderHelpers.LOAD_AS_ARRAY_BUFFER&&(this.currentRequest.responseType="arraybuffer"));this.currentRequest.addEventListener("progress",this.onItemLoadProgress.bind(b),!1);this.currentRequest.addEventListener("load",this.onItemLoadComplete.bind(b),!1);this.currentRequest.addEventListener("error",this.onItemLoadError.bind(b),
!1);b.element=this.currentRequest;return!0}return!1};c.generateLoaderItem=function(a,d){var c=new FSLoaderItem(this,a,d);c.loadingType=void 0!==d?void 0!==d.loadingType?d.loadingType:this.identifyLoadingType(c.type):this.identifyLoadingType(c.type);return c};c.removeEventsFromElement=function(a){a.removeEventListener("load",this.onItemLoadComplete);a.removeEventListener("error",this.onItemLoadError);a.removeEventListener("progress",this.onItemLoadProgress)};c.onItemLoadComplete=function(b){this.state=
a.FSLoaderHelpers.STATE_FINISHED;this.progress=100;if(this.reference.loadingType===a.FSLoaderHelpers.LOAD_AS_BLOB||this.reference.loadingType===a.FSLoaderHelpers.LOAD_AS_XHR)this.element=b.currentTarget;if(this.loadingType===a.FSLoaderHelpers.LOAD_AS_TAGS)this.data=this.element;else if(this.loadingType===a.FSLoaderHelpers.LOAD_AS_XHR)this.data=b.currentTarget.response;else if(this.loadingType===a.FSLoaderHelpers.LOAD_AS_BLOB||this.loadingType===a.FSLoaderHelpers.LOAD_AS_ARRAY_BUFFER)this.data=b.currentTarget.response;
if(void 0!==this.queue)this.queue.onQueueItemComplete(this);void 0!==this.options.oncomplete&&(void 0!==this.options.oncompleteparams?this.options.oncomplete.apply(this,this.options.oncompleteparams):this.options.oncomplete.apply(this));this.reference.removeEventsFromElement(this.element)};c.onItemLoadProgress=function(b){if(!(0<b.loaded&&0===b.total)){this.state=a.FSLoaderHelpers.STATE_LOADING;this.bytesLoaded=b.loaded;this.bytesTotal=b.total;this.progress=Math.round(100*this.bytesLoaded/this.bytesTotal);
if(void 0!==this.queue)this.queue.onQueueItemProgress(this);void 0!==this.options.onprogress&&(void 0!==this.options.onprogressparams?this.options.onprogress.apply(this,this.options.onprogressparams):this.options.onprogress.apply(this))}};c.onItemLoadError=function(){this.reference.removeEventsFromElement(this.element);if(0<this.retriesLeft){this.retriesLeft--;var b=this;setTimeout(function(){b.reference.executeLoad(b)},100)}else{this.state=a.FSLoaderHelpers.STATE_ERROR;if(void 0!==this.queue)this.queue.onQueueItemError(this);
void 0!==this.options.onerror&&(void 0!==this.options.onerrorparams?this.options.onerror.apply(this,this.options.onerrorparams):this.options.onerror.apply(this))}}})(F_NAMESPACE);F_NAMESPACE=this.fs?this.fs:window;
(function(a){a.FSLoaderQueue=function(b){this.reference=new a.FSLoader(b);this.currentIndex=0;this.currentItem=void 0;this.ignoreErrors=!0;this.isPaused=!1;this.firstStart=!0;this.progress=this.totalLoaded=this.total=0;this.options={};void 0!==b&&(this.options=b);void 0!==this.options&&(void 0!==this.options.ignoreErrors&&(this.ignoreErrors=this.options.ignoreErrors),void 0!==this.options.ignoreErrors&&(this.ignoreErrors=this.options.ignoreErrors));a.FSLoader.call(this,b)};if(void 0!==a.FSLoader)a.FSLoaderQueue.prototype=
new a.FSLoader,a.FSLoaderQueue.constructor=a.FSLoaderQueue;else throw a.FSLoaderQueue=void 0,Error("FSLoaderQueue needs FSLoader for work.");var c=a.FSLoaderQueue.prototype;c.add=function(a,d){var c=[],e,f,g=void 0;"[object Array]"===Object.prototype.toString.call(a)?c=a:c.push(a);e=c.length;for(f=0;f<e;f++)g=this.load(c[f],d,!1),g.queue=this,g.reference=this.reference,this.total=this.items.length};c.start=function(){0!==this.items.length&&(!0===this.firstStart&&(this.triggerCallbackEvent("onqueuestart"),
this.updateQueueProgress()),this.currentItem=this.items[this.currentIndex],this.executeLoad(this.currentItem),this.firstStart=!1)};c.pause=function(){this.isPaused=!0};c.next=function(){this.currentIndex++;this.start()};c.previous=function(){this.currentIndex--;this.start()};c.verifyQueueEnd=function(){return this.currentIndex<this.total-1?!0:!1};c.onQueueItemComplete=function(){this.totalLoaded++;this.triggerCallbackEvent("onitemcomplete");this.updateQueueProgress();this.verifyQueueEnd()?this.next():
this.triggerCallbackEvent("onqueuecomplete")};c.onQueueItemError=function(a){this.triggerCallbackEvent("onitemerror");!0===this.ignoreErrors?(a.progress=100,this.updateQueueProgress(),this.verifyQueueEnd()?this.next():this.triggerCallbackEvent("onqueuecomplete")):this.triggerCallbackEvent("onqueueerror")};c.onQueueItemProgress=function(){this.updateQueueProgress()};c.onQueueItemStart=function(a){this.triggerCallbackEvent("onitemstart",a)};c.updateQueueProgress=function(){for(var a=0,d=0;d<this.items.length;d++)a+=
this.items[d].progress;this.progress=Math.round(100*a/(100*this.items.length));this.triggerCallbackEvent("onitemprogress");this.triggerCallbackEvent("onqueueprogress")};c.triggerCallbackEvent=function(a,d){var c=this;void 0!==d&&(c=d);void 0!==c.options&&void 0!==c.options[a]&&(void 0!==c.options[a+"params"]?c.options[a].apply(c,c.options[a+"params"]):c.options[a].apply(c))}})(F_NAMESPACE);F_NAMESPACE=this.fs?this.fs:window;
(function(a){a.FSPreloader=function(b){this.container=document;this.elements=[];this.cssElements=[];a.FSLoaderQueue.call(this,b)};if(void 0!==a.FSLoaderQueue)a.FSPreloader.prototype=new a.FSLoaderQueue,a.FSPreloader.prototype.constructor=a.FSLoaderQueue;else throw a.FSPreloader=void 0,Error("FSPreloader needs FSLoaderQueue to work.");var c=a.FSPreloader.prototype;c.parseCss=function(b){if(void 0!==b){var d=[],c=b.length,e;for(e=0;e<c;e++)null!==b[e]&&void 0!==b[e]&&(null!==b[e].cssRules||null!==b[e].rules?
"undefined"!==typeof b[e].cssRules?d=b[e].cssRules:"undefined"!==typeof b[e].rules&&(d=b[e].rules):console.log("WARNING: cssRules/rules is null for the element: "+b[e].href),this.add(a.FSLoaderHelpers.findRule(d,"backgroundImage")))}};c.parseDocument=function(b){this.elements=document.querySelectorAll('[data-preload="true"]');var d=this.elements.length,c,e;for(e=0;e<d;e++)c=a.FSLoaderHelpers.identifyTagType(this.elements[e]),c.type===a.FSLoaderHelpers.TYPE_CSS?this.cssElements.push(c.tag.sheet):c.type===
a.FSLoaderHelpers.TYPE_IMAGE&&this.add(c.path);void 0!==b&&("true"===b.cssDependencies||!0===b.cssDependencies)&&this.parseCss(this.cssElements)}})(F_NAMESPACE);
